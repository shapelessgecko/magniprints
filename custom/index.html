<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Custom Print — MagniPrints</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&family=Space+Grotesk:wght@500;700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/loaders/STLLoader.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <link rel="stylesheet" href="../css/main.css">
    <link rel="stylesheet" href="../css/custom.css">
</head>
<body>
    <!-- Navigation -->
    <nav class="nav">
        <div class="nav-logo">
            <svg viewBox="0 0 40 40" class="logo-icon">
                <path d="M20 2L4 12v16l16 10 16-10V12L20 2z" fill="none" stroke="currentColor" stroke-width="2"/>
                <path d="M20 8L10 14v12l10 6 10-6V14L20 8z" fill="currentColor" opacity="0.3"/>
                <circle cx="20" cy="22" r="4" fill="currentColor"/>
            </svg>
            <span class="logo-text">MagniPrints</span>
        </div>
        <div class="nav-links">
            <a href="../index.html">Home</a>
            <a href="../products/">Products</a>
            <a href="index.html" class="active">Custom Print</a>
            <a href="../track/">Track</a>
        </div>
        <button class="theme-toggle" aria-label="Toggle theme">
            <svg class="sun-icon" viewBox="0 0 24 24"><circle cx="12" cy="12" r="5"/><path d="M12 1v2m0 18v2M4.22 4.22l1.42 1.42m12.72 12.72l1.42 1.42M1 12h2m18 0h2M4.22 19.78l1.42-1.42m12.72-12.72l1.42-1.42"/></svg>
            <svg class="moon-icon" viewBox="0 0 24 24"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
        </button>
    </nav>

    <main class="custom-page">
        <div class="container">
            <div class="custom-header">
                <h1>Custom 3D Print</h1>
                <p>Upload your STL file, configure settings, and get an instant quote</p>
            </div>

            <div class="custom-layout">
                <!-- Left: 3D Viewer -->
                <section class="viewer-section">
                    <div class="main-viewer" id="custom-viewer">
                        <div class="viewer-placeholder" id="viewer-placeholder">
                            <svg viewBox="0 0 48 48" class="placeholder-icon">
                                <path d="M24 4L6 14v20l18 10 18-10V14L24 4z" fill="none" stroke="currentColor" stroke-width="2"/>
                                <path d="M24 12L12 18v12l12 6 12-6V18L24 12z" fill="currentColor" opacity="0.3"/>
                                <circle cx="24" cy="25" r="3" fill="currentColor"/>
                            </svg>
                            <p>Upload an STL file or select a sample model</p>
                            <span class="placeholder-hint">Drag & drop supported</span>
                        </div>
                        <!-- Viewer controls -->
                        <div class="viewer-controls-custom">
                            <button id="btn-reset-view" class="control-btn" title="Reset View">
                                <svg viewBox="0 0 24 24"><path d="M3 12a9 9 0 109-9 9.75 9.75 0 00-6.74 2.74L3 8M3 3v5h5" fill="none" stroke="currentColor" stroke-width="2"/></svg>
                            </button>
                            <button id="btn-toggle-grid" class="control-btn active" title="Toggle Grid">
                                <svg viewBox="0 0 24 24"><rect x="3" y="3" width="18" height="18" rx="2" fill="none" stroke="currentColor" stroke-width="2"/><path d="M3 9h18M9 3v18" fill="none" stroke="currentColor" stroke-width="2"/></svg>
                            </button>
                            <button id="btn-measure" class="control-btn" title="Show Dimensions">
                                <svg viewBox="0 0 24 24"><path d="M6 4h12M6 4l2 14M18 4l-2 14M8 18h10M4 22h16" fill="none" stroke="currentColor" stroke-width="2"/></svg>
                            </button>
                        </div>
                    </div>

                    <!-- Sample Models -->
                    <div class="sample-models">
                        <h3>Try a Sample Model</h3>
                        <div class="sample-grid">
                            <button class="sample-card active" data-sample="phone-stand">
                                <div class="sample-thumb" id="thumb-phone-stand"></div>
                                <span>Phone Stand</span>
                            </button>
                            <button class="sample-card" data-sample="vase">
                                <div class="sample-thumb" id="thumb-vase"></div>
                                <span>Zen Vase</span>
                            </button>
                            <button class="sample-card" data-sample="figurine">
                                <div class="sample-thumb" id="thumb-figurine"></div>
                                <span>Robo Figurine</span>
                            </button>
                        </div>
                    </div>
                </section>

                <!-- Right: Upload & Settings -->
                <aside class="settings-panel">
                    <!-- Upload Zone -->
                    <div class="upload-zone" id="upload-zone">
                        <input type="file" id="stl-input" accept=".stl,.STL" hidden>
                        <div class="upload-content">
                            <svg viewBox="0 0 48 48" class="upload-icon">
                                <path d="M24 32V16m0 0l-8 8m8-8l8 8" fill="none" stroke="currentColor" stroke-width="2"/>
                                <path d="M8 28v4a4 4 0 004 4h24a4 4 0 004-4v-4M12 20l12-12 12 12" fill="none" stroke="currentColor" stroke-width="2"/>
                            </svg>
                            <p class="upload-text">Drag & drop your STL file here</p>
                            <p class="upload-or">or</p>
                            <button class="btn btn-secondary" id="browse-btn">Browse Files</button>
                            <p class="upload-limit">Maximum file size: 50MB</p>
                        </div>
                        <div class="upload-progress hidden" id="upload-progress">
                            <div class="progress-bar">
                                <div class="progress-fill" id="progress-fill"></div>
                            </div>
                            <span class="progress-text" id="progress-text">Uploading...</span>
                        </div>
                    </div>

                    <!-- Settings -->
                    <div class="settings-form">
                        <div class="form-section">
                            <h3>Print Settings</h3>
                            
                            <div class="form-group">
                                <label for="layer-height">Layer Height</label>
                                <div class="input-with-value">
                                    <input type="range" id="layer-height" min="0.1" max="0.4" step="0.05" value="0.2">
                                    <span class="value-display" id="layer-value">0.2mm</span>
                                </div>
                                <div class="range-labels">
                                    <span>0.1mm (Fine)</span>
                                    <span>0.4mm (Fast)</span>
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="infill">Infill Density</label>
                                <div class="input-with-value">
                                    <input type="range" id="infill" min="0" max="100" step="10" value="20">
                                    <span class="value-display" id="infill-value">20%</span>
                                </div>
                                <div class="range-labels">
                                    <span>0% (Hollow)</span>
                                    <span>100% (Solid)</span>
                                </div>
                            </div>

                            <div class="form-group">
                                <label>Supports Required</label>
                                <div class="toggle-group">
                                    <button class="toggle-btn active" data-supports="none">None</button>
                                    <button class="toggle-btn" data-supports="touching">Touching</button>
                                    <button class="toggle-btn" data-supports="everywhere">Everywhere</button>
                                </div>
                            </div>
                        </div>

                        <div class="form-section">
                            <h3>Material Selection</h3>
                            
                            <div class="form-group">
                                <label>Filament Type</label>
                                <div class="material-options">
                                    <button class="material-btn active" data-material="pla" data-price="2">
                                        <span class="material-color" style="background: #667eea;"></span>
                                        <span class="material-info">
                                            <strong>PLA</strong>
                                            <small>₹2/g • Standard</small>
                                        </span>
                                    </button>
                                    <button class="material-btn" data-material="petg" data-price="3">
                                        <span class="material-color" style="background: #3b82f6;"></span>
                                        <span class="material-info">
                                            <strong>PETG</strong>
                                            <small>₹3/g • Strong</small>
                                        </span>
                                    </button>
                                    <button class="material-btn" data-material="tpu" data-price="5">
                                        <span class="material-color" style="background: #f59e0b;"></span>
                                        <span class="material-info">
                                            <strong>TPU</strong>
                                            <small>₹5/g • Flexible</small>
                                        </span>
                                    </button>
                                </div>
                            </div>

                            <div class="form-group">
                                <label>Print Color</label>
                                <div class="color-grid" id="color-grid">
                                    <button class="color-option active" style="background: #667eea;" data-color="0x667eea"></button>
                                    <button class="color-option" style="background: #22c55e;" data-color="0x22c55e"></button>
                                    <button class="color-option" style="background: #ef4444;" data-color="0xef4444"></button>
                                    <button class="color-option" style="background: #3b82f6;" data-color="0x3b82f6"></button>
                                    <button class="color-option" style="background: #f59e0b;" data-color="0xf59e0b"></button>
                                    <button class="color-option" style="background: #ec4899;" data-color="0xec4899"></button>
                                    <button class="color-option" style="background: #14b8a6;" data-color="0x14b8a6"></button>
                                    <button class="color-option" style="background: #ffffff;" data-color="0xffffff"></button>
                                    <button class="color-option" style="background: #1a1a1a;" data-color="0x1a1a1a"></button>
                                    <button class="color-option" style="background: #fbbf24;" data-color="0xfbbf24"></button>
                                    <button class="color-option" style="background: #a855f7;" data-color="0xa855f7"></button>
                                    <button class="color-option" style="background: #84cc16;" data-color="0x84cc16"></button>
                                </div>
                            </div>
                        </div>

                        <!-- Model Info -->
                        <div class="model-info" id="model-info">
                            <h3>Model Statistics</h3>
                            <div class="info-grid">
                                <div class="info-item">
                                    <span class="info-label">Dimensions</span>
                                    <span class="info-value" id="info-dimensions">-- × -- × -- mm</span>
                                </div>
                                <div class="info-item">
                                    <span class="info-label">Volume</span>
                                    <span class="info-value" id="info-volume">-- cm³</span>
                                </div>
                                <div class="info-item">
                                    <span class="info-label">Triangles</span>
                                    <span class="info-value" id="info-triangles">--</span>
                                </div>
                                <div class="info-item">
                                    <span class="info-label">Est. Weight</span>
                                    <span class="info-value" id="info-weight">-- g</span>
                                </div>
                            </div>
                        </div>

                        <!-- Price Estimate -->
                        <div class="price-estimate">
                            <div class="estimate-header">
                                <span>Estimated Price</span>
                                <span class="estimate-price" id="estimate-price">₹--</span>
                            </div>
                            <div class="estimate-breakdown">
                                <div class="breakdown-item">
                                    <span>Material Cost</span>
                                    <span id="breakdown-material">₹--</span>
                                </div>
                                <div class="breakdown-item">
                                    <span>Print Time (~<span id="est-time">--</span>h)</span>
                                    <span id="breakdown-time">₹--</span>
                                </div>
                                <div class="breakdown-item">
                                    <span>Setup Fee</span>
                                    <span id="breakdown-setup">₹50</span>
                                </div>
                            </div>
                        </div>

                        <!-- Order Button -->
                        <a href="https://wa.me/918800000000?text=Hi%20MagniPrints,%20I%20want%20to%20order%20a%20custom%20print" 
                           target="_blank" 
                           id="custom-order-btn" 
                           class="btn btn-primary btn-large btn-block">
                            <svg viewBox="0 0 24 24"><path d="M21 11.5a8.38 8.38 0 01-.9 3.8 8.5 8.5 0 01-7.6 4.7 8.38 8.38 0 01-3.8-.9L3 21l1.9-5.7A8.38 8.38 0 016.5 11.4 8.5 8.5 0 0111.3 3.9 8.38 8.38 0 0115.2 3 8.5 8.5 0 0121 11.5z" fill="none" stroke="currentColor" stroke-width="2"/></svg>
                            Order via WhatsApp
                        </a>

                        <p class="settings-note">
                            <svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="10" fill="none" stroke="currentColor" stroke-width="2"/><path d="M12 16v-4M12 8h.01" fill="none" stroke="currentColor" stroke-width="2"/></svg>
                            Final price may vary based on actual print complexity
                        </p>
                    </div>
                </aside>
            </div>
        </div>
    </main>

    <script src="../js/custom-3d.js"></script>
    <script src="../js/main.js"></script>
</body>
</html>
